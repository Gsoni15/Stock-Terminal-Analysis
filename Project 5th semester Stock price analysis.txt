from datetime import date  # pip install datetime
import matplotlib.pyplot as plt  # pip install matplotlib
import yfinance as yf  # pip install yfinance


def end_date_time(end):
    print("\nChoose Duration:- ")
    print("|  1. Last Week  |  2. Last Month   |   3. Last 5 Month   |   4. Last Year   |   5. Last 5 Year   |")
    resp = int(input("Response:- "))
    if resp > 5:
        resp = int(input("Please Enter Properly....Response:- "))
    if resp == 1:
        start = date(end.year, end.month, end.day - 7)
    elif resp == 2:
        start = date(end.year, end.month - 1, end.day)
    elif resp == 3:
        start = date(end.year, end.month - 5, end.day)
    elif resp == 4:
        start = date(end.year - 1, end.month, end.day)
    else:
        start = date(end.year - 5, end.month, end.day)
    return start


def imp_data(symbol_list, start, end):
    data = yf.download(symbol_list, start, end)
    return data


def graph_ch():
    print("\nChoose Amongst Two Graph:- ")
    print("1. Open and Close     2. High and Low")
    choice = int(input("Enter Choice:- "))
    if choice > 2:
        print("Please Enter Properly....Choice:- ")
    return choice


def open_close(data, start_date, end_date):
    fig, ax = plt.subplots()
    fig.autofmt_xdate()
    plt.xlabel("Date")
    plt.ylabel("Price")
    plt.title('Opening And Closing Prices from {} to {}'.format(start_date, end_date))
    plt.plot(data['Open'])
    plt.plot(data['Close'])
    plt.show()


def high_low(data, start_date, end_date):
    fig, ax = plt.subplots()
    fig.autofmt_xdate()
    plt.xlabel("Date")
    plt.ylabel("Price")
    plt.title('High and Low Prices from {} to {}'.format(start_date, end_date))
    plt.plot(data['High'])
    plt.plot(data['Low'])
    plt.show()


def graph(choice):
    if choice == 1:
        open_close(stock_data, start_day, end_day)
    else:
        high_low(stock_data, start_day, end_day)


if _name_ == "_main_":
    symbol = input("Enter Stock Symbol:- ")
    end_day = date.today()
    start_day = end_date_time(end_day)
    print(end_day, start_day)
    stock_data = imp_data(symbol, start_day, end_day)
    graph(graph_ch())
    